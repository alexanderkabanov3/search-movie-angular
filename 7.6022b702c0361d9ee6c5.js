(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8o96":function(t,e,i){"use strict";i.r(e),i.d(e,"MediaNavContentModule",function(){return O});var s=i("ofXK"),r=i("fXoL"),n=i("tyNb"),o=i("XNiG"),a=i("2Vo4"),c=i("tk/3");let l=(()=>{class t{constructor(t){this.httpMedia=t,this.sortStream$=new o.a,this.mediaResults$=new o.a,this.preLoader$=new a.a(!0),this.filterMode=!1,this.moviesArr=[],this.noResults=new a.a(!1),this.btnExist=new a.a(!0),this.pages=1}queryType(t,e){this.filterMode=!1,this.type=t,this.description=e,this.preLoader$.next(!0),this.noResults.next(!1),this.btnExist.next(!0),this.pages=1,this.moviesArr=[],this.fetchingList(this.type,this.description)}fetchingList(t,e){this.httpMedia.get(`https://api.themoviedb.org/3/${t}/${e}?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US&page=${this.pages}`).subscribe(t=>{t.results.forEach(t=>{this.moviesArr.push(t)}),this.pages++,this.mediaResults$.next(this.moviesArr),setTimeout(()=>{this.preLoader$.next(!1)},300)})}load(){this.filterMode?this.fetchFilteredList(this.type,this.genres,this.option):this.fetchingList(this.type,this.description)}fetchFilteredList(t,e,i){this.filterMode=!0,this.noResults.next(!1),this.btnExist.next(!0),this.httpMedia.get(`https://api.themoviedb.org/3/discover/${t}?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US&sort_by=${i}&include_adult=false&include_video=false&page=${this.pages}&with_genres=${e}&with_watch_monetization_types=flatrate`).subscribe(t=>{this.totalPages=t.total_pages,t.results.forEach(t=>{this.moviesArr.push(t)}),this.pages++,this.mediaResults$.next(this.moviesArr),this.compare(),setTimeout(()=>{this.preLoader$.next(!1)},300)})}compare(){0===this.moviesArr.length&&this.noResults.next(!0),this.moviesArr.length>20*this.totalPages-20&&this.btnExist.next(!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Ub(c.a))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const d=["sortOption"],h=["sorting"];function b(t,e){if(1&t&&(r.Qb(0,"p",14),r.vc(1),r.Pb()),2&t){const t=e.$implicit;r.gc("id",t.id),r.Ab(1),r.xc(" ",t.name," ")}}let p=(()=>{class t{constructor(t,e,i){this.httpGenre=t,this.sortService=e,this.router=i,this.genresUrl="https://api.themoviedb.org/3/genre/movie/list?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US",this.btnDisabled=!0}ngOnInit(){this.fetchGenre(),this.router.events.subscribe(t=>{document.querySelectorAll(".sortingBar__genre").forEach(t=>{t.classList.remove("sortingBar__genre--selected")});const e=this.sorting.nativeElement.children;for(const i of e)i.removeAttribute("selected");this.sortOption.nativeElement.setAttribute("selected","selected"),this.btnDisabled=!0})}fetchGenre(){this.httpGenre.get(this.genresUrl).subscribe(t=>{this.genreArr=t.genres})}select(t){if(!t.target.classList.contains("sortingBar__genresBlock")){t.target.classList.contains("sortingBar__genre--selected")?t.target.classList.remove("sortingBar__genre--selected"):t.target.classList.add("sortingBar__genre--selected");const e=t.target.parentNode.children;let i=0;for(const t of e)t.classList.contains("sortingBar__genre--selected")&&i++;i>0?this.btnDisabled=!1:this.sortOption.nativeElement.selected&&(this.btnDisabled=!0)}}selectOption(t){this.btnDisabled="popularity.desc"===t.target.value,document.querySelectorAll(".sortingBar__genre").forEach(t=>{t.classList.contains("sortingBar__genre--selected")&&(this.btnDisabled=!1)})}sendData(){const t=document.querySelectorAll(".sortingBar__genre"),e=[];t.forEach(t=>{t.classList.contains("sortingBar__genre--selected")&&e.push(t.id)});const i=this.sorting.nativeElement.children;for(const s of i)s.selected&&this.sortService.sortStream$.next({option:s.value,genres:e.join(",")})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(c.a),r.Lb(l),r.Lb(n.c))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-sorting-bar"]],viewQuery:function(t,e){if(1&t&&(r.zc(d,1),r.zc(h,1)),2&t){let t;r.mc(t=r.Yb())&&(e.sortOption=t.first),r.mc(t=r.Yb())&&(e.sorting=t.first)}},decls:25,vars:2,consts:[[1,"sortingBar"],[1,"sortingBar__heading"],["name","sort","id","sort",1,"sortingBar__options",3,"change"],["sorting",""],["value","popularity.desc","selected",""],["sortOption",""],["value","popularity.asc"],["value","release_date.desc"],["value","release_date.asc"],["value","vote_average.desc"],["value","vote_average.asc"],[1,"sortingBar__genresBlock",3,"click"],["class","sortingBar__genre",3,"id",4,"ngFor","ngForOf"],[1,"sortingBar__btn",3,"disabled","click"],[1,"sortingBar__genre",3,"id"]],template:function(t,e){1&t&&(r.Qb(0,"div",0),r.Qb(1,"p",1),r.vc(2,"Sort results by"),r.Pb(),r.Qb(3,"select",2,3),r.Xb("change",function(t){return e.selectOption(t)}),r.Qb(5,"option",4,5),r.vc(7," Popularity descending "),r.Pb(),r.Qb(8,"option",6),r.vc(9,"Popularity ascending"),r.Pb(),r.Qb(10,"option",7),r.vc(11,"Release date descending"),r.Pb(),r.Qb(12,"option",8),r.vc(13,"Release date ascending"),r.Pb(),r.Qb(14,"option",9),r.vc(15,"Rating descending"),r.Pb(),r.Qb(16,"option",10),r.vc(17,"Rating ascending"),r.Pb(),r.Pb(),r.Mb(18,"hr"),r.Qb(19,"p",1),r.vc(20,"Genres"),r.Pb(),r.Qb(21,"div",11),r.Xb("click",function(t){return e.select(t)}),r.tc(22,b,2,2,"p",12),r.Pb(),r.Qb(23,"button",13),r.Xb("click",function(){return e.sendData()}),r.vc(24," Search "),r.Pb(),r.Pb()),2&t&&(r.Ab(22),r.fc("ngForOf",e.genreArr),r.Ab(1),r.fc("disabled",e.btnDisabled))},directives:[s.k],styles:[""]}),t})();var u=i("R0Ic"),g=i("0MNC"),f=i("g87O"),v=i("K1R0");function m(t,e){1&t&&r.Mb(0,"app-preloader",2)}function _(t,e){if(1&t&&r.Mb(0,"img",15),2&t){const t=r.bc().$implicit;r.hc("src","https://www.themoviedb.org/t/p/w220_and_h330_face",t.poster_path,"",r.rc),r.ic("srcset","https://www.themoviedb.org/t/p/w220_and_h330_face",t.poster_path," 1x, https://www.themoviedb.org/t/p/w440_and_h660_face",t.poster_path," 2x",r.rc)}}function S(t,e){1&t&&r.Mb(0,"img",16)}const y=function(t,e){return["/overview",t,e]};function k(t,e){if(1&t&&(r.Qb(0,"div",8),r.tc(1,_,1,3,"img",9),r.tc(2,S,1,0,"ng-template",null,10,r.uc),r.Qb(4,"p",11),r.vc(5),r.Pb(),r.Qb(6,"div",12),r.Mb(7,"circle-progress",13),r.Pb(),r.Qb(8,"p",14),r.vc(9),r.cc(10,"date"),r.Pb(),r.Pb()),2&t){const t=e.$implicit,i=r.nc(3),s=r.bc(3);r.gc("id",t.id),r.fc("routerLink",r.lc(22,y,s.type,t.id))("@item",void 0),r.Ab(1),r.fc("ngIf",null!==t.poster_path)("ngIfElse",i),r.Ab(4),r.wc(t.title||t.name),r.Ab(2),r.fc("percent",10*t.vote_average)("space",-10)("radius",s.barValue)("outerStrokeWidth",s.outerStrokeWidth)("innerStrokeWidth",0)("outerStrokeColor","#c6232d")("innerStrokeColor","#fff")("animation",!0)("animationDuration",2e3)("titleFontSize",s.titleFontSize)("backgroundPadding",1)("unitsFontSize",s.unitsFontSize)("titleFontWeight","800"),r.Ab(2),r.xc(" ",r.dc(10,20,t.release_date||t.first_air_date)," ")}}function F(t,e){if(1&t&&(r.Qb(0,"div",6),r.tc(1,k,11,25,"div",7),r.Pb()),2&t){const t=r.bc(2);r.Ab(1),r.fc("ngForOf",t.moviesArr)}}function w(t,e){1&t&&(r.Qb(0,"p",17),r.vc(1,"No results"),r.Pb())}function L(t,e){if(1&t){const t=r.Rb();r.Qb(0,"button",18),r.Xb("click",function(){return r.pc(t),r.bc(2).load()}),r.vc(1," Load More "),r.Pb()}}function x(t,e){if(1&t&&(r.tc(0,F,2,1,"div",3),r.cc(1,"async"),r.tc(2,w,2,0,"ng-template",null,4,r.uc),r.tc(4,L,2,0,"button",5),r.cc(5,"async")),2&t){const t=r.nc(3),e=r.bc();r.fc("ngIf",!r.dc(1,3,e.noResults$))("ngIfElse",t),r.Ab(4),r.fc("ngIf",r.dc(5,5,e.btnExist$))}}let A=(()=>{class t{constructor(t,e,i){this.sortService=t,this.breakpointObserver=e,this.router=i,this.moviesArr=[],this.btnExist$=this.sortService.btnExist,this.noResults$=this.sortService.noResults,this.preLoader$=this.sortService.preLoader$,this.option="popularity.desc",this.barValue=25,this.titleFontSize="15",this.outerStrokeWidth=5,this.unitsFontSize="12"}ngOnInit(){this.mediaArrSubscription=this.sortService.mediaResults$.subscribe(t=>{this.moviesArr=t}),this.router.params.subscribe(t=>{this.type=t.type}),this.sortServiceSubscription=this.sortService.sortStream$.subscribe(t=>{this.sortService.pages=1,this.sortService.genres=t.genres,this.sortService.option=t.option,this.sortService.moviesArr=[],this.preLoader$.next(!0),this.sortService.fetchFilteredList(this.sortService.type,t.genres,t.option)}),this.mediaQueries()}load(){this.sortService.load()}mediaQueries(){this.breakpointObserver.observe(["(max-width: 790px)"]).subscribe(t=>{t.matches&&(this.barValue=20,this.titleFontSize="12",this.outerStrokeWidth=4)}),this.breakpointObserver.observe(["(max-width: 650px)"]).subscribe(t=>{t.matches&&(this.barValue=17,this.titleFontSize="10",this.outerStrokeWidth=4,this.unitsFontSize="10")}),this.breakpointObserver.observe(["(max-width: 510px)"]).subscribe(t=>{t.matches&&(this.barValue=20,this.titleFontSize="12",this.outerStrokeWidth=4,this.unitsFontSize="12")})}ngOnDestroy(){this.mediaArrSubscription.unsubscribe(),this.sortServiceSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(l),r.Lb(g.a),r.Lb(n.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-media-content"]],decls:4,vars:4,consts:[["class","loader",4,"ngIf","ngIfElse"],["content",""],[1,"loader"],["class","media__content",4,"ngIf","ngIfElse"],["noresults",""],["class","media__btn",3,"click",4,"ngIf"],[1,"media__content"],["class","media__card",3,"id","routerLink",4,"ngFor","ngForOf"],[1,"media__card",3,"id","routerLink"],["class","media__poster","loading","lazy",3,"src","srcset",4,"ngIf","ngIfElse"],["alter",""],[1,"media__title"],["align","center",1,"progressBar","progressBar--media",2,"margin-top","10%"],[3,"percent","space","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","titleFontSize","backgroundPadding","unitsFontSize","titleFontWeight"],[1,"media__date"],["loading","lazy",1,"media__poster",3,"src","srcset"],["loading","lazy","src","https://st.depositphotos.com/2251265/2417/i/600/depositphotos_24176415-stock-photo-blank-poster-on-a-wood.jpg",1,"media__poster"],[1,"found__not","found__not--filt"],[1,"media__btn",3,"click"]],template:function(t,e){if(1&t&&(r.tc(0,m,1,0,"app-preloader",0),r.cc(1,"async"),r.tc(2,x,6,7,"ng-template",null,1,r.uc)),2&t){const t=r.nc(3);r.fc("ngIf",r.dc(1,2,e.preLoader$))("ngIfElse",t)}},directives:[s.l,f.a,s.k,n.d,v.a],pipes:[s.b,s.e],styles:[""],data:{animation:[Object(u.i)("item",[Object(u.h)(":enter",[Object(u.g)({opacity:0}),Object(u.e)("850ms ease-out")])])]}}),t})(),$=(()=>{class t{constructor(t,e){this.router=t,this.sortingDataService=e}ngOnInit(){this.router.params.subscribe(t=>{const e=t.description.split("_").join(" ");this.title=`${"movie"===t.type?"movies":"serials"} ${e}`,this.sortingDataService.queryType(t.type,t.description)})}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(n.a),r.Lb(l))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-media-nav-content"]],decls:6,vars:1,consts:[[1,"container"],[1,"media__heading"],[1,"media"],[1,"media__bar"]],template:function(t,e){1&t&&(r.Qb(0,"div",0),r.Qb(1,"h2",1),r.vc(2),r.Pb(),r.Qb(3,"div",2),r.Mb(4,"app-sorting-bar",3),r.Mb(5,"app-media-content"),r.Pb(),r.Pb()),2&t&&(r.Ab(2),r.wc(e.title))},directives:[p,A],styles:[""]}),t})(),P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[s.c]]}),t})();var Q=i("3LI4");let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({imports:[[s.c,n.f.forChild([{path:"",component:$}]),P,v.b.forRoot({backgroundColor:"#000",radius:30,maxPercent:100,units:" %",unitsColor:"#FFF",outerStrokeWidth:1,outerStrokeColor:"#FFFFFF",innerStrokeColor:"#FFFFFF",titleColor:"#fff",subtitleColor:"#FFF",showSubtitle:!1,showInnerStroke:!1,startFromZero:!1}),Q.a]]}),t})()}}]);