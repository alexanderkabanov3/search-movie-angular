(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{rDna:function(e,t,o){"use strict";o.r(t),o.d(t,"DetailPeopleModule",function(){return y});var i=o("ofXK"),s=o("mrSG"),n=o("tk/3"),c=o("R0Ic"),r=o("fXoL"),a=o("DPk/"),m=o("kUbd"),l=o("3Pt+"),b=o("tyNb");function p(e,t){1&e&&(r.Pb(0,"div",3),r.Lb(1,"div",4),r.Lb(2,"div",5),r.Lb(3,"div",6),r.Lb(4,"div",7),r.Ob())}function d(e,t){if(1&e&&r.Lb(0,"img",26),2&e){const e=r.ac(2);r.gc("src","https://www.themoviedb.org/t/p/w220_and_h330_face",e.item.profile_path,"",r.pc),r.hc("srcset","https://www.themoviedb.org/t/p/w220_and_h330_face",e.item.profile_path," 1x, https://www.themoviedb.org/t/p/w440_and_h660_face",e.item.profile_path," 2x",r.pc),r.ec("@item",void 0)}}function h(e,t){1&e&&r.Lb(0,"img",27)}function v(e,t){if(1&e&&r.Lb(0,"img",32),2&e){const e=r.ac().$implicit;r.gc("src","https://www.themoviedb.org/t/p/w220_and_h330_face",e.poster_path,"",r.pc)}}function u(e,t){1&e&&r.Lb(0,"img",33)}const g=function(e){return["/movieoverview",e]},_=function(e){return["/seriesoverview",e]};function f(e,t){if(1&e&&(r.Pb(0,"div",28),r.rc(1,v,1,1,"img",29),r.rc(2,u,1,0,"ng-template",null,11,r.sc),r.Pb(4,"p",30),r.tc(5),r.Ob(),r.Pb(6,"p",31),r.tc(7),r.bc(8,"date"),r.Ob(),r.Ob()),2&e){const e=t.$implicit,o=r.lc(3);r.ec("routerLink",e.title?r.jc(8,g,e.id):r.jc(10,_,e.id))("@item",void 0),r.zb(1),r.ec("ngIf",null!==e.poster_path)("ngIfElse",o),r.zb(4),r.uc(e.title||e.name),r.zb(2),r.vc(" ",r.cc(8,6,e.release_date||e.first_air_date)," ")}}function w(e,t){if(1&e){const e=r.Qb();r.Pb(0,"button",39),r.Wb("click",function(){r.nc(e);const t=r.ac().$implicit;return r.ac(2).deleteComment(t._id)}),r.tc(1," delete comment "),r.Ob()}}function O(e,t){if(1&e&&(r.Pb(0,"div",34),r.Pb(1,"span",35),r.tc(2),r.Ob(),r.Pb(3,"span",36),r.tc(4),r.bc(5,"date"),r.Ob(),r.Pb(6,"p",37),r.tc(7),r.Ob(),r.rc(8,w,2,0,"button",38),r.Ob()),2&e){const e=t.$implicit,o=r.ac(2);r.zb(2),r.uc(e.userName),r.zb(2),r.uc(r.dc(5,4,e.date,"MMM d, y, h:mm:ss a")),r.zb(3),r.uc(e.text),r.zb(1),r.ec("ngIf",e.userName===o.currentUser)}}function P(e,t){if(1&e){const e=r.Qb();r.Pb(0,"div",8),r.Pb(1,"div",9),r.rc(2,d,1,4,"img",10),r.rc(3,h,1,0,"ng-template",null,11,r.sc),r.Pb(5,"div",12),r.Pb(6,"p",13),r.tc(7),r.Ob(),r.Pb(8,"p",14),r.tc(9),r.Ob(),r.Pb(10,"p",15),r.tc(11," Biography "),r.Ob(),r.Pb(12,"p",16),r.tc(13),r.Ob(),r.Ob(),r.Ob(),r.Ob(),r.Pb(14,"div",17),r.Pb(15,"p",15),r.tc(16," Known for "),r.Ob(),r.Pb(17,"div",18),r.rc(18,f,9,12,"div",19),r.Ob(),r.Pb(19,"div",20),r.Pb(20,"p",21),r.tc(21),r.Ob(),r.rc(22,O,9,7,"div",22),r.Pb(23,"div",23),r.Pb(24,"textarea",24),r.Wb("ngModelChange",function(t){return r.nc(e),r.ac().comment=t}),r.Ob(),r.Pb(25,"button",25),r.Wb("click",function(){return r.nc(e),r.ac().leaveComment()}),r.tc(26," submit "),r.Ob(),r.Ob(),r.Ob(),r.Ob()}if(2&e){const e=r.lc(4),t=r.ac();r.zb(2),r.ec("ngIf",null!==t.item.profile_path)("ngIfElse",e),r.zb(5),r.vc(" ",t.item.name," "),r.zb(2),r.uc(t.item.known_for_department),r.zb(4),r.vc(" ",t.item.biography," "),r.zb(5),r.ec("ngForOf",t.known),r.zb(3),r.vc("",t.commentsAmount," comments"),r.zb(1),r.ec("ngForOf",t.commentsArray),r.zb(2),r.ec("ngModel",t.comment)("placeholder",t.favoriteService.btnExist?"leave a comment":"I am waiting for your registration :)")("disabled",!t.favoriteService.btnExist)("title",t.favoriteService.btnExist?"leave a comment":"please, register in order to leave a comment"),r.zb(1),r.ec("disabled",!t.favoriteService.btnExist||t.comment.length<10)("title",!t.favoriteService.btnExist||t.comment.length<10?"please, register or type at least 10 characters in order to leave a comment":"leave a comment")}}let k=(()=>{class e{constructor(e,t,o,i,s,n,c){this.httpMovie=e,this.httpCredits=t,this.userData=o,this.postComment=i,this.getAllCommentsHttp=s,this.deleteCommentHttp=n,this.favoriteService=c,this.preLoader=!0,this.known=[],this.commentsAmount=0,this.commentsArray=[],this.comment="",this.currentUser=""}ngOnInit(){this.currentUser=localStorage.getItem("userName"),this.userSubscription=this.userData.userName.subscribe(e=>{this.currentUser=e}),this.id=+window.location.pathname.match(/\d+/)[0],this.getAllComments(),this.fetchItem(this.id).then(e=>{this.item=e,this.bgImgPath=`https://image.tmdb.org/t/p/original${this.item.profile_path}`,this.searchMovies(this.item.imdb_id).then(({person_results:e})=>{0!==e.length&&(this.known=e[0].known_for),setTimeout(()=>{this.preLoader=!1},500)})})}fetchItem(e){return Object(s.a)(this,void 0,void 0,function*(){return yield this.httpMovie.get(`https://api.themoviedb.org/3/person/${e}?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US`).toPromise()})}searchMovies(e){return Object(s.a)(this,void 0,void 0,function*(){return yield this.httpCredits.get(`https://api.themoviedb.org/3/find/${e}?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US&external_source=imdb_id`).toPromise()})}leaveComment(){const e={text:this.comment,userName:localStorage.getItem("userName")},t=`Bearer ${localStorage.getItem("token")}`,o=(new n.c).set("Authorization",t);this.postComment.post(`https://search-movie-server.herokuapp.com/api/comments/personoverview/${this.id}`,e,{headers:o}).subscribe(e=>{"success"===e.status&&this.getAllComments()},e=>{console.log(e)}),this.comment=""}getAllComments(){this.getAllCommentsHttp.get(`https://search-movie-server.herokuapp.com/api/comments/personoverview/${this.id}`).subscribe(e=>{this.commentsArray=e.data.reverse(),this.commentsAmount=this.commentsArray.length},e=>{console.log(e)})}deleteComment(e){const t=`Bearer ${localStorage.getItem("token")}`,o=(new n.c).set("Authorization",t);this.deleteCommentHttp.delete(`https://search-movie-server.herokuapp.com/api/comments/personoverview/${this.id}/${e}`,{headers:o}).subscribe(e=>{"success"===e.status&&this.getAllComments()},e=>{console.log(e)})}ngOnDestroy(){this.userSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(n.a),r.Kb(n.a),r.Kb(a.a),r.Kb(n.a),r.Kb(n.a),r.Kb(n.a),r.Kb(m.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-detail-people"]],decls:4,vars:2,consts:[[1,"overview"],["class","loader",4,"ngIf","ngIfElse"],["mainContent",""],[1,"loader"],[1,"dash","uno"],[1,"dash","dos"],[1,"dash","tres"],[1,"dash","cuatro"],[1,"overview__topPerson"],[1,"container","overview__topBlock"],["class","overview__poster","loading","lazy",3,"src","srcset",4,"ngIf","ngIfElse"],["alter",""],[1,"overview__information"],[1,"overview__title","overview__title--person"],[1,"overview__known"],[1,"overview__castTitle","overview__castTitle--biography"],[1,"overview__biography"],[1,"container"],[1,"overview__knownBlock"],["class","overview__person",3,"routerLink",4,"ngFor","ngForOf"],[1,"comments"],[1,"comments__amount"],["class","comments__comment",4,"ngFor","ngForOf"],[1,"comments__leave"],[1,"comments__tap",3,"ngModel","placeholder","disabled","title","ngModelChange"],[1,"comments__submit",3,"disabled","title","click"],["loading","lazy",1,"overview__poster",3,"src","srcset"],["loading","lazy","src","https://st.depositphotos.com/2251265/2417/i/600/depositphotos_24176415-stock-photo-blank-poster-on-a-wood.jpg",1,"overview__poster"],[1,"overview__person",3,"routerLink"],["class","overview__castPoster","loading","lazy",3,"src",4,"ngIf","ngIfElse"],[1,"overview__originalName"],[1,"overview__originalName","overview__originalName--character"],["loading","lazy",1,"overview__castPoster",3,"src"],["loading","lazy","src","https://st.depositphotos.com/2251265/2417/i/600/depositphotos_24176415-stock-photo-blank-poster-on-a-wood.jpg",1,"overview__castPoster"],[1,"comments__comment"],[1,"comments__name"],[1,"comments__date"],[1,"comments__text"],["class","comments__delete",3,"click",4,"ngIf"],[1,"comments__delete",3,"click"]],template:function(e,t){if(1&e&&(r.Pb(0,"div",0),r.rc(1,p,5,0,"div",1),r.rc(2,P,27,14,"ng-template",null,2,r.sc),r.Ob()),2&e){const e=r.lc(3);r.zb(1),r.ec("ngIf",t.preLoader)("ngIfElse",e)}},directives:[i.k,i.j,l.a,l.g,l.i,b.d],pipes:[i.d],styles:[""],data:{animation:[Object(c.i)("item",[Object(c.h)(":enter",[Object(c.g)({opacity:0}),Object(c.e)("850ms ease-out")])])]}}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({imports:[[i.b,b.f.forChild([{path:"",component:k}]),l.f]]}),e})()}}]);