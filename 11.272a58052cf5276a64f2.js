(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{bKyA:function(t,e,i){"use strict";i.r(e),i.d(e,"PopularMovieModule",function(){return k});var s=i("ofXK"),o=i("tyNb"),r=i("K1R0"),n=i("mrSG"),a=i("R0Ic"),c=i("fXoL"),h=i("tk/3"),l=i("87FN"),d=i("0MNC");function u(t,e){1&t&&(c.Pb(0,"div",2),c.Lb(1,"div",3),c.Lb(2,"div",4),c.Lb(3,"div",5),c.Lb(4,"div",6),c.Ob())}function p(t,e){if(1&t&&c.Lb(0,"img",19),2&t){const t=c.ac().$implicit;c.gc("src","https://www.themoviedb.org/t/p/w220_and_h330_face",t.poster_path,"",c.pc),c.hc("srcset","https://www.themoviedb.org/t/p/w220_and_h330_face",t.poster_path," 1x, https://www.themoviedb.org/t/p/w440_and_h660_face",t.poster_path," 2x",c.pc)}}function b(t,e){1&t&&c.Lb(0,"img",20)}const f=function(t){return["/movieoverview",t]};function g(t,e){if(1&t&&(c.Pb(0,"div",12),c.rc(1,p,1,3,"img",13),c.rc(2,b,1,0,"ng-template",null,14,c.sc),c.Pb(4,"p",15),c.tc(5),c.Ob(),c.Pb(6,"div",16),c.Lb(7,"circle-progress",17),c.Ob(),c.Pb(8,"p",18),c.tc(9),c.bc(10,"date"),c.Ob(),c.Ob()),2&t){const t=e.$implicit,i=c.lc(3),s=c.ac(3);c.fc("id",t.id),c.ec("routerLink",c.jc(22,f,t.id))("@item",void 0),c.zb(1),c.ec("ngIf",null!==t.poster_path)("ngIfElse",i),c.zb(4),c.uc(t.title),c.zb(2),c.ec("percent",10*t.vote_average)("space",-10)("radius",s.barValue)("outerStrokeWidth",s.outerStrokeWidth)("innerStrokeWidth",0)("outerStrokeColor","#c6232d")("innerStrokeColor","#fff")("animation",!0)("animationDuration",2e3)("titleFontSize",s.titleFontSize)("backgroundPadding",1)("unitsFontSize",s.unitsFontSize)("titleFontWeight","800"),c.zb(2),c.uc(c.cc(10,20,t.release_date))}}function m(t,e){if(1&t&&(c.Pb(0,"div",10),c.rc(1,g,11,24,"div",11),c.Ob()),2&t){const t=c.ac(2);c.zb(1),c.ec("ngForOf",t.moviesArr)}}function v(t,e){1&t&&(c.Pb(0,"p",21),c.tc(1,"No results"),c.Ob())}function _(t,e){if(1&t){const t=c.Qb();c.Pb(0,"button",22),c.Wb("click",function(){return c.nc(t),c.ac(2).load()}),c.tc(1," Load More "),c.Ob()}}function S(t,e){if(1&t&&(c.rc(0,m,2,1,"div",7),c.rc(1,v,2,0,"ng-template",null,8,c.sc),c.rc(3,_,2,0,"button",9)),2&t){const t=c.lc(2),e=c.ac();c.ec("ngIf",!e.noResults)("ngIfElse",t),c.zb(3),c.ec("ngIf",e.btnExist)}}let F=(()=>{class t{constructor(t,e,i,s){this.httpMovie=t,this.sortService=e,this.httpFiler=i,this.breakpointObserver=s,this.moviesArr=[],this.pages=1,this.btnExist=!0,this.preLoader=!0,this.noResults=!1,this.filter=!1,this.barValue=25,this.titleFontSize="15",this.outerStrokeWidth=5,this.unitsFontSize="12"}ngOnInit(){this.sortService.genres="",this.sortService.sortValue="",this.fetchingList().then(()=>{setTimeout(()=>{this.preLoader=!1},500)}),this.mediaQueries()}ngDoCheck(){""!==this.sortService.sortValue&&(this.preLoader=!0,this.moviesArr=[],this.btnExist=!0,this.noResults=!1,this.pages=1,this.filter=!0,this.filterAlone().then(t=>{t.forEach(t=>{this.moviesArr.push(t)})}).then(()=>{this.pages++,this.compare(),setTimeout(()=>{this.preLoader=!1},500)}),this.sortService.sortValue="")}fetchingList(){return Object(n.a)(this,void 0,void 0,function*(){(yield this.httpMovie.get(`https://api.themoviedb.org/3/discover/movie?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page=${this.pages}&with_watch_monetization_types=flatrate`).toPromise()).results.forEach(t=>{this.moviesArr.push(t)}),this.pages++})}load(){!0===this.filter?this.filterAlone().then(t=>{t.forEach(t=>{this.moviesArr.push(t)})}).then(()=>{this.pages++,this.compare()}):this.fetchingList()}filterAlone(){return Object(n.a)(this,void 0,void 0,function*(){const t=yield this.httpFiler.get(`https://api.themoviedb.org/3/discover/movie?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US&sort_by=${this.sortService.sortValue}&include_adult=false&include_video=false&page=${this.pages}&with_genres=${this.sortService.genres}&with_watch_monetization_types=flatrate`).toPromise();return this.totaRes=t.total_results,t.results})}compare(){const t=this.totaRes/20;0===t&&(this.noResults=!0),this.moviesArr.length/20>=t&&(this.btnExist=!1)}mediaQueries(){this.breakpointObserver.observe(["(max-width: 790px)"]).subscribe(t=>{t.matches&&(this.barValue=20,this.titleFontSize="12",this.outerStrokeWidth=4)}),this.breakpointObserver.observe(["(max-width: 650px)"]).subscribe(t=>{t.matches&&(this.barValue=17,this.titleFontSize="10",this.outerStrokeWidth=4,this.unitsFontSize="10")}),this.breakpointObserver.observe(["(max-width: 510px)"]).subscribe(t=>{t.matches&&(this.barValue=20,this.titleFontSize="12",this.outerStrokeWidth=4,this.unitsFontSize="12")})}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(h.a),c.Kb(l.a),c.Kb(h.a),c.Kb(d.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["app-popular-movie"]],decls:3,vars:2,consts:[["class","loader",4,"ngIf","ngIfElse"],["content",""],[1,"loader"],[1,"dash","uno"],[1,"dash","dos"],[1,"dash","tres"],[1,"dash","cuatro"],["class","media__content",4,"ngIf","ngIfElse"],["noresults",""],["class","media__btn",3,"click",4,"ngIf"],[1,"media__content"],["class","media__card",3,"id","routerLink",4,"ngFor","ngForOf"],[1,"media__card",3,"id","routerLink"],["class","media__poster","loading","lazy",3,"src","srcset",4,"ngIf","ngIfElse"],["alter",""],[1,"media__title"],["align","center",1,"progressBar","progressBar--media",2,"margin-top","10%"],[3,"percent","space","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration","titleFontSize","backgroundPadding","unitsFontSize","titleFontWeight"],[1,"media__date"],["loading","lazy",1,"media__poster",3,"src","srcset"],["loading","lazy","src","https://st.depositphotos.com/2251265/2417/i/600/depositphotos_24176415-stock-photo-blank-poster-on-a-wood.jpg",1,"media__poster"],[1,"found__not","found__not--filt"],[1,"media__btn",3,"click"]],template:function(t,e){if(1&t&&(c.rc(0,u,5,0,"div",0),c.rc(1,S,4,3,"ng-template",null,1,c.sc)),2&t){const t=c.lc(2);c.ec("ngIf",e.preLoader)("ngIfElse",t)}},directives:[s.k,s.j,o.d,r.a],pipes:[s.d],styles:[""],data:{animation:[Object(a.i)("item",[Object(a.h)(":enter",[Object(a.g)({opacity:0}),Object(a.e)("850ms ease-out")])])]}}),t})(),k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({imports:[[s.b,o.f.forChild([{path:"",component:F}]),r.b.forRoot({backgroundColor:"#000",radius:30,maxPercent:100,units:" %",unitsColor:"#FFF",outerStrokeWidth:1,outerStrokeColor:"#FFFFFF",innerStrokeColor:"#FFFFFF",titleColor:"#fff",subtitleColor:"#FFF",showSubtitle:!1,showInnerStroke:!1,startFromZero:!1})]]}),t})()}}]);