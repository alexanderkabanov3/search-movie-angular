(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{rDna:function(e,t,o){"use strict";o.r(t),o.d(t,"DetailPeopleModule",function(){return y});var c=o("ofXK"),i=o("tk/3"),n=o("R0Ic"),s=o("yhFZ"),r=o("fXoL"),a=o("nhdH"),m=o("l7P3"),l=o("3Pt+"),b=o("tyNb");function p(e,t){1&e&&(r.Qb(0,"div",3),r.Mb(1,"div",4),r.Mb(2,"div",5),r.Mb(3,"div",6),r.Mb(4,"div",7),r.Pb())}function d(e,t){if(1&e&&r.Mb(0,"img",26),2&e){const e=r.bc(2);r.hc("src","https://www.themoviedb.org/t/p/w220_and_h330_face",e.item.profile_path,"",r.rc),r.ic("srcset","https://www.themoviedb.org/t/p/w220_and_h330_face",e.item.profile_path," 1x, https://www.themoviedb.org/t/p/w440_and_h660_face",e.item.profile_path," 2x",r.rc),r.fc("@item",void 0)}}function h(e,t){1&e&&r.Mb(0,"img",27)}function v(e,t){if(1&e&&r.Mb(0,"img",32),2&e){const e=r.bc().$implicit;r.hc("src","https://www.themoviedb.org/t/p/w220_and_h330_face",e.poster_path,"",r.rc)}}function _(e,t){1&e&&r.Mb(0,"img",33)}const g=function(e){return["/overview","movie",e]},f=function(e){return["/overview","tv",e]};function u(e,t){if(1&e&&(r.Qb(0,"div",28),r.tc(1,v,1,1,"img",29),r.tc(2,_,1,0,"ng-template",null,11,r.uc),r.Qb(4,"p",30),r.vc(5),r.Pb(),r.Qb(6,"p",31),r.vc(7),r.cc(8,"date"),r.Pb(),r.Pb()),2&e){const e=t.$implicit,o=r.nc(3);r.fc("routerLink",e.title?r.kc(8,g,e.id):r.kc(10,f,e.id))("@item",void 0),r.Ab(1),r.fc("ngIf",null!==e.poster_path)("ngIfElse",o),r.Ab(4),r.wc(e.title||e.name),r.Ab(2),r.xc(" ",r.dc(8,6,e.release_date||e.first_air_date)," ")}}function w(e,t){if(1&e){const e=r.Rb();r.Qb(0,"button",39),r.Xb("click",function(){r.pc(e);const t=r.bc().$implicit;return r.bc(2).deleteComment(t._id)}),r.vc(1," delete comment "),r.Pb()}}function k(e,t){if(1&e&&(r.Qb(0,"div",34),r.Qb(1,"span",35),r.vc(2),r.Pb(),r.Qb(3,"span",36),r.vc(4),r.cc(5,"date"),r.Pb(),r.Qb(6,"p",37),r.vc(7),r.Pb(),r.tc(8,w,2,0,"button",38),r.cc(9,"async"),r.Pb()),2&e){const e=t.$implicit,o=r.bc(2);r.Ab(2),r.wc(e.userName),r.Ab(2),r.wc(r.ec(5,4,e.date,"MMM d, y, h:mm:ss a")),r.Ab(3),r.wc(e.text),r.Ab(1),r.fc("ngIf",e.userName===r.dc(9,7,o.currentUser$))}}function P(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",8),r.Qb(1,"div",9),r.tc(2,d,1,4,"img",10),r.tc(3,h,1,0,"ng-template",null,11,r.uc),r.Qb(5,"div",12),r.Qb(6,"p",13),r.vc(7),r.Pb(),r.Qb(8,"p",14),r.vc(9),r.Pb(),r.Qb(10,"p",15),r.vc(11," Biography "),r.Pb(),r.Qb(12,"p",16),r.vc(13),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(14,"div",17),r.Qb(15,"p",15),r.vc(16," Known for "),r.Pb(),r.Qb(17,"div",18),r.tc(18,u,9,12,"div",19),r.Pb(),r.Qb(19,"div",20),r.Qb(20,"p",21),r.vc(21),r.Pb(),r.tc(22,k,10,9,"div",22),r.Qb(23,"div",23),r.Qb(24,"textarea",24),r.Xb("ngModelChange",function(t){return r.pc(e),r.bc().comment=t}),r.cc(25,"async"),r.cc(26,"async"),r.cc(27,"async"),r.Pb(),r.Qb(28,"button",25),r.Xb("click",function(){return r.pc(e),r.bc().leaveComment()}),r.cc(29,"async"),r.cc(30,"async"),r.vc(31," submit "),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.nc(4),t=r.bc();r.Ab(2),r.fc("ngIf",null!==t.item.profile_path)("ngIfElse",e),r.Ab(5),r.xc(" ",t.item.name," "),r.Ab(2),r.wc(t.item.known_for_department),r.Ab(4),r.xc(" ",t.item.biography," "),r.Ab(5),r.fc("ngForOf",t.known),r.Ab(3),r.xc("",t.commentsAmount," comments"),r.Ab(1),r.fc("ngForOf",t.commentsArray),r.Ab(2),r.fc("ngModel",t.comment)("placeholder",r.dc(25,14,t.checkedIn$)?"leave a comment":"I am waiting for your registration :)")("disabled",!r.dc(26,16,t.checkedIn$))("title",r.dc(27,18,t.checkedIn$)?"leave a comment":"please, register in order to leave a comment"),r.Ab(4),r.fc("disabled",!r.dc(29,20,t.checkedIn$)||t.comment.length<10)("title",!r.dc(30,22,t.checkedIn$)||t.comment.length<10?"please, register or type at least 10 characters in order to leave a comment":"leave a comment")}}let A=(()=>{class e{constructor(e,t,o,c,i,n,r){this.httpMovie=e,this.httpCredits=t,this.postComment=o,this.getAllCommentsHttp=c,this.deleteCommentHttp=i,this.favoriteService=n,this.store=r,this.preLoader=!0,this.known=[],this.commentsAmount=0,this.commentsArray=[],this.comment="",this.currentUser$=this.store.select(s.e),this.checkedIn$=this.store.select(s.a)}ngOnInit(){this.id=+window.location.pathname.match(/\d+/)[0],this.getAllComments(),this.fetchItem(this.id)}fetchItem(e){this.httpMovie.get(`https://api.themoviedb.org/3/person/${e}?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US`).subscribe(e=>{this.item=e,this.bgImgPath=`https://image.tmdb.org/t/p/original${this.item.profile_path}`,this.searchMovies(this.item.imdb_id)})}searchMovies(e){this.httpCredits.get(`https://api.themoviedb.org/3/find/${e}?api_key=f4a143e6e64636aa4b0cd6bec7236ad4&language=en-US&external_source=imdb_id`).subscribe(({person_results:e})=>{0!==e.length&&(this.known=e[0].known_for),setTimeout(()=>{this.preLoader=!1},500)})}leaveComment(){const e={text:this.comment,userName:localStorage.getItem("userName")},t=`Bearer ${localStorage.getItem("token")}`,o=(new i.c).set("Authorization",t);this.postComment.post(`https://search-movie-server.herokuapp.com/api/comments/personoverview/${this.id}`,e,{headers:o}).subscribe(e=>{"success"===e.status&&this.getAllComments()},e=>{console.log(e)}),this.comment=""}getAllComments(){this.getAllCommentsHttp.get(`https://search-movie-server.herokuapp.com/api/comments/personoverview/${this.id}`).subscribe(e=>{this.commentsArray=e.data.reverse(),this.commentsAmount=this.commentsArray.length},e=>{console.log(e)})}deleteComment(e){const t=`Bearer ${localStorage.getItem("token")}`,o=(new i.c).set("Authorization",t);this.deleteCommentHttp.delete(`https://search-movie-server.herokuapp.com/api/comments/personoverview/${this.id}/${e}`,{headers:o}).subscribe(e=>{"success"===e.status&&this.getAllComments()},e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(i.a),r.Lb(i.a),r.Lb(i.a),r.Lb(i.a),r.Lb(i.a),r.Lb(a.a),r.Lb(m.h))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-detail-people"]],decls:4,vars:2,consts:[[1,"overview"],["class","loader",4,"ngIf","ngIfElse"],["mainContent",""],[1,"loader"],[1,"dash","uno"],[1,"dash","dos"],[1,"dash","tres"],[1,"dash","cuatro"],[1,"overview__topPerson"],[1,"container","overview__topBlock"],["class","overview__poster","loading","lazy",3,"src","srcset",4,"ngIf","ngIfElse"],["alter",""],[1,"overview__information"],[1,"overview__title","overview__title--person"],[1,"overview__known"],[1,"overview__castTitle","overview__castTitle--biography"],[1,"overview__biography"],[1,"container"],[1,"overview__knownBlock"],["class","overview__person",3,"routerLink",4,"ngFor","ngForOf"],[1,"comments"],[1,"comments__amount"],["class","comments__comment",4,"ngFor","ngForOf"],[1,"comments__leave"],[1,"comments__tap",3,"ngModel","placeholder","disabled","title","ngModelChange"],[1,"comments__submit",3,"disabled","title","click"],["loading","lazy",1,"overview__poster",3,"src","srcset"],["loading","lazy","src","https://st.depositphotos.com/2251265/2417/i/600/depositphotos_24176415-stock-photo-blank-poster-on-a-wood.jpg",1,"overview__poster"],[1,"overview__person",3,"routerLink"],["class","overview__castPoster","loading","lazy",3,"src",4,"ngIf","ngIfElse"],[1,"overview__originalName"],[1,"overview__originalName","overview__originalName--character"],["loading","lazy",1,"overview__castPoster",3,"src"],["loading","lazy","src","https://st.depositphotos.com/2251265/2417/i/600/depositphotos_24176415-stock-photo-blank-poster-on-a-wood.jpg",1,"overview__castPoster"],[1,"comments__comment"],[1,"comments__name"],[1,"comments__date"],[1,"comments__text"],["class","comments__delete",3,"click",4,"ngIf"],[1,"comments__delete",3,"click"]],template:function(e,t){if(1&e&&(r.Qb(0,"div",0),r.tc(1,p,5,0,"div",1),r.tc(2,P,32,24,"ng-template",null,2,r.uc),r.Pb()),2&e){const e=r.nc(3);r.Ab(1),r.fc("ngIf",t.preLoader)("ngIfElse",e)}},directives:[c.l,c.k,l.a,l.g,l.i,b.d],pipes:[c.b,c.e],styles:[""],data:{animation:[Object(n.i)("item",[Object(n.h)(":enter",[Object(n.g)({opacity:0}),Object(n.e)("850ms ease-out")])])]}}),e})(),y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({imports:[[c.c,b.f.forChild([{path:"",component:A}]),l.f]]}),e})()}}]);